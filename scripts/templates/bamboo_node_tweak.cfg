# Configuration template for bamboo nodes
# ${variable} will be replaced by the configuration generator accordingly

<sandstorm>
    <global>
        <initargs>
            node_id ${host}:${router_port}
        </initargs>
    </global>

    <stages>
        <Network>
            class bamboo.network.Network
            <initargs>
            </initargs>         
        </Network>
        
        <Router>
            class bamboo.router.Router
            <initargs>
                gateway_count ${gateway_count}
		${gateway_list}
            </initargs>
        </Router>

        <Rpc>
            class bamboo.lss.Rpc
            <initargs>
            </initargs>		
        </Rpc>

	<StorageManager>
    	    class bamboo.db.StorageManager
	    <initargs>
		homedir 		${home_dir}
		libdb_cache_size	104857600
	    </initargs>
	</StorageManager>
	
	<DataManager>
	    class bamboo.dmgr.DataManager
	    <initargs>
		required_acks 1
	    </initargs>
	</DataManager>	    
	
	<Dht>
	    class bamboo.dht.Dht
	    <initargs>
		virtual_disks		3
		disk_size_0		589824000
		disk_size_1		14155776000
		disk_size_2		99090432000
		token_bucket_size_0	10485760
		token_bucket_size_1	10485760
		token_bucket_size_2	10485760			
		slop_size_0		102400
		slop_size_1		102400
		slop_size_2		102400
		storage_manager_stage 	StorageManager
		min_replica_count 	1
	    </initargs>
	</Dht>
	
	<Gateway>
	    class bamboo.dht.Gateway
	    <initargs>
		port ${rpc_port}
	    </initargs>
	</Gateway>

	<Vivaldi>
            class bamboo.vivaldi.Vivaldi
            <initargs>
              vc_type          2.5d
              generate_pings   true
              eavesdrop_pings  false
              use_reverse_ping true
              ping_period      10000
              version          1
            </initargs>
        </Vivaldi>
    </stages>
</sandstorm>
